<div class="space-y-4 max-w-xs w-full">
	<button type="button" class="btn btn-neutral w-full" onclick="newDirDialog.showModal()">
		new directory
	</button>
	<button type="button" class="btn btn-neutral w-full" onclick="newFileDialog.showModal()">
		new file
	</button>
	<form method="POST" action="/upload" enctype="multipart/form-data" class="form-control gap-2">
		<input
			type="file"
			multiple
			required
			name="files"
			class="file-input file-input-bordered"
			onchange="onUploadChange(this.files.length)"
		/>
		<button type="submit" class="btn btn-outline" id="uploadButton" disabled>
			upload
		</button>
	</form>
</div>

<dialog id="newDirDialog" class="modal">
	<div class="modal-box">
		<h3 class="font-bold text-lg">New directory name:</h3>
		<input type="text" class="input input-bordered w-full mt-2" name="dirName" form="newDir">
		<div class="modal-action">
			<form method="dialog">
				<button class="btn">cancel</button>
			</form>
			<form method="POST" action="/newDir" id="newDir">
				<button type="submit" class="btn btn-neutral w-full">
					create
				</button>
			</form>
		</div>
	</div>
	<form method="dialog" class="modal-backdrop">
		<button>close</button>
	</form>
</dialog>

<dialog id="newFileDialog" class="modal">
	<div class="modal-box">
		<h3 class="font-bold text-lg">New file name:</h3>
		<input type="text" class="input input-bordered w-full mt-2" name="fileName" form="newFile">
		<div class="modal-action">
			<form method="dialog">
				<button class="btn">cancel</button>
			</form>
			<form method="POST" action="/newFile" id="newFile">
				<button type="submit" class="btn btn-neutral w-full">
					create
				</button>
			</form>
		</div>
	</div>
	<form method="dialog" class="modal-backdrop">
		<button>close</button>
	</form>
</dialog>

<script>
	function onUploadChange(filesCount) {
		if (filesCount !== 0) {
			uploadButton.disabled = false;
			uploadButton.innerText = `upload ${filesCount} ${filesCount === 1 ? 'file' : 'files'}`;
		} else {
			uploadButton.disabled = true;
			uploadButton.innerText = 'upload';
		}
	}
</script>